<?php


?>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width"/>
    <meta name="viewport" content="initial-scale=1.0"/>
    <meta name="viewport" content="maximum-scale=1.0"/>
    <meta name="viewport" content="user-scalable=1.0"/>
    <title>树莓派</title>
	<link rel="stylesheet" type="text/css"href="css/menu.css"/>
	<script type="text/javascript" src="js/navi.js"></script>
    <script>
		window.onload = function(){
			document.getElementById("wrap").style.display="block";
			var _title = ['灯光控制', '场景模式', '小车', '视频监控'];
			var news=document.getElementById("news_ul");
			for(var i=0;i<_title.length;i++){
				var li = create_element(news, 'li', null, null, null);
				var a = create_element(li, 'a', null, null, _title[i]);
				a.setAttribute("href", 'javascript:onNewsTitle(' + i + ');');
				li.style.border = "0px";
				li.style.borderBottomStyle ="none";
			}
			setTimeout(function() {onNewsTitle(0);},20);
			
			doInitNavi('msg', 0);
		}
		
		var titles = ["lamp", "scene", "car", "video"];
		showPage = function(title){
			for(var i in titles){
				if(titles[i] === title)
					document.getElementById(titles[i]).style.display="block";
				else
					document.getElementById(titles[i]).style.display="none";
			}
		}
		
		onNewsTitle = function(i){
			var news=document.getElementById("news_ul");
			var elem_child = news.getElementsByTagName("li"); 
			for(var j=0;j<elem_child.length;j++)
			{
				var a = elem_child[j].getElementsByTagName("a")[0]; 
				if(i == j){
					a.style.color = '#f00';
					a.style.background = getMenuImg(0);
				}
				else{
					a.style.color = '#fff';
					a.style.background = 'transparent';
				}
			}
			var news=document.getElementById("video");
			var elem_child = news.getElementsByTagName("iframe"); 
			if(0 == i){
				showPage("lamp");
				if(elem_child[0].src.indexOf("fake.html") < 0)//关闭视频页面
					elem_child[0].src = "fake.html";
				window.frames['flamp'].window.refresh();//location.reload();
			}
			else if(1 == i){
				showPage("scene");
				if(elem_child[0].src.indexOf("fake.html") < 0)//关闭视频页面
					elem_child[0].src = "fake.html";
				window.frames['fscene'].window.refresh();//location.reload();
			}
			else if(2 == i){
				showPage("car");
				if(elem_child[0].src.indexOf("fake.html") < 0)//关闭视频页面
					elem_child[0].src = "fake.html";
			}
			else if(3 == i){
				showPage("video");
				var src = window.location.host;
				var npos = src.indexOf(":");

				if(npos >= 0)
					src = src.substr(0,npos);
				src += ":8080/javascript_simple.html";
				elem_child[0].src = "http://" + src;
			}
		}
		var mode='normal';
		window.addEventListener('message',function(e){
			if('http://' + window.location.host !== e.origin)
				return;
				
			if('mode'===e.data.msg || 'getmode'===e.data.msg){
				if('mode'===e.data.msg)
					mode=e.data.data;
				window.frames['fscene'].postMessage({'msg':'mode' , 'data':mode},'*');
			}
		},false);
    </script>
</head>
<body>

<div id = "wrap" style="display:none;overflow-y:auto;height: 100%; position: relative;width:100%;background:white;margin:0 auto;max-width:1080px;">
	<div class="menu" id = "news" align="left">
		<ul id = "news_ul">
		</ul>
	</div><br/><br/><br/>
	<div id="lamp" style="display:block">
		<iframe name="flamp" src='lamp.html' class="myframe"></iframe>
	</div>
	<div id="scene" style="display:none">
		<iframe name="fscene" src='scene.html?param=work' class="myframe"></iframe>
	</div>
	<div id="car" style="display:none">
		<iframe name="fcar" src='car.html' class="myframe"></iframe>
	</div>
	<div id="video" style="display:none">
		<iframe name="fvideo" src='' class="myframe"></iframe>
	</div>
	<div id="footer"><canvas id="msg" align="left"></canvas></div>
</div>
</body>
</html>